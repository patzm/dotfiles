---
- name: installing core packages
  become: yes
  package: name={{ item }} state=latest
  with_items:
    - alacritty
    - blueman
    - bmon
    - curl
    - deepin-calculator
    - exiv2
    - feh
    - git
    - gimp
    - gnome-keyring
    - hsetroot
    - htop
    - imagemagick
    - inkscape
    - libsecret
    - libva-intel-driver
    - neofetch
    - neovim
    - network-manager-applet
    - networkmanager
    - patch
    - python-pip  # Python 3
    - python-virtualenv
    - python-virtualenvwrapper
    - ranger
    - rxvt-unicode
    - tmux
    - tree
    - ttf-cascadia-code
    - unrar
    - urxvt-perls
    - vim
    - wget
    - wmctrl
    - xclip
    - xorg-xev
    - zsh

- name: create the yay config folder
  file:
    path: '{{ yay_config_dir }}'
    state: directory

- name: Keychron K2 function keys fix
  become: yes
  copy:
    src: "archlinux/hid_apple.conf"
    dest: "/etc/modprobe.d/hid_apple.conf"

- name: copy yay config files
  copy:
    src: 'archlinux/yay/config.json'
    dest: '{{ yay_config_file }}'
    owner: "{{ ansible_env.USER }}"
    group: "{{ user_group }}"
    force: yes

- name: install powerline fonts
  command: yay --answerdiff=None --noconfirm --needed -S powerline-fonts-git

- name: install emoji fonts
  command: yay --answerdiff=None --noconfirm --needed -S ttf-joypixels

- name: install Python3.7
  command: yay --answerdiff=None --noconfirm --needed -S python38
